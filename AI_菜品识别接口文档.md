# AI菜品识别接口文档

## 概述

AI菜品识别模块是一个独立的功能模块，专门负责识别上传图片中的菜品。该模块基于深度学习ResNet-50模型，可以识别100种不同的菜品类别。

## 特点

- **独立模块**：不依赖于主系统的用户认证和数据库
- **简单易用**：只需上传图片，返回菜品名称和置信度
- **高准确率**：基于ResNet-50深度学习模型
- **快速响应**：支持实时图片识别

## API接口

### 菜品图片识别

**接口地址：** `POST /api/classify-dish`

**功能描述：** 上传图片文件，返回AI识别的菜品名称和置信度

**请求方式：** POST

**认证要求：** 无需认证

**请求参数：**

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| image | File | 是 | 图片文件（支持PNG、JPG、JPEG、GIF格式） |

**请求示例：**

```bash
curl -X POST \
  http://localhost:5000/api/classify-dish \
  -H 'Content-Type: multipart/form-data' \
  -F 'image=@/path/to/your/image.jpg'
```

**响应格式：**

成功响应：
```json
{
  "code": 200,
  "message": "识别成功",
  "data": {
    "dish_name": "fried rice",
    "confidence": 89.25
  }
}
```

失败响应：
```json
{
  "code": 400,
  "message": "请上传图片文件"
}
```

**状态码说明：**

| 状态码 | 说明 |
|--------|------|
| 200 | 识别成功 |
| 400 | 请求参数错误（如未上传文件、文件格式不支持等） |
| 500 | 服务器错误（如AI模型加载失败、识别过程出错等） |

## 支持的菜品类别

本AI模型可以识别以下100种菜品类别：

### 主食类
- rice（米饭）
- eels on rice（鳗鱼饭）
- pilaf（抓饭）
- chicken-'n'-egg on rice（亲子丼）
- pork cutlet on rice（猪排饭）
- beef curry（牛肉咖喱）
- fried rice（炒饭）
- tempura bowl（天妇罗丼）
- bibimbap（石锅拌饭）

### 面包类
- toast（吐司）
- croissant（羊角面包）
- roll bread（餐包）
- raisin bread（葡萄干面包）
- chip butty（薯条三明治）

### 快餐类
- hamburger（汉堡包）
- pizza（披萨）
- sandwiches（三明治）

### 寿司类
- sushi（寿司）

*... 完整列表包含100种菜品类别*

## 使用说明

### 图片要求

1. **格式支持**：PNG、JPG、JPEG、GIF
2. **建议尺寸**：最佳识别效果建议图片尺寸为224x224像素或更大
3. **图片质量**：清晰度越高，识别准确率越高
4. **文件大小**：建议不超过10MB

### 置信度说明

- 置信度范围：0-100%
- 通常置信度 > 70% 表示识别结果较为可信
- 置信度 < 50% 建议重新拍摄更清晰的图片

### 最佳实践

1. **拍摄角度**：建议从正上方或45度角拍摄菜品
2. **光线条件**：保证充足的光线，避免阴影
3. **背景简洁**：避免复杂背景干扰
4. **主体突出**：确保菜品占据画面主要部分

## 错误处理

### 常见错误及解决方案

| 错误信息 | 原因 | 解决方案 |
|----------|------|----------|
| 请上传图片文件 | 请求中没有包含image字段 | 确保使用multipart/form-data格式上传文件 |
| 未选择文件 | 文件名为空 | 选择有效的图片文件 |
| 不支持的文件格式 | 文件格式不在支持列表中 | 使用PNG、JPG、JPEG或GIF格式 |
| 文件保存失败 | 服务器存储问题 | 检查服务器磁盘空间和权限 |
| AI模型未正确安装或配置 | 模型文件缺失或损坏 | 联系管理员重新配置AI模型 |
| AI识别过程中出错 | 图片处理或模型推理异常 | 检查图片是否损坏，或尝试其他图片 |

## 技术实现

### 模型架构
- **基础模型**：ResNet-50
- **训练数据**：包含100种菜品类别的大规模数据集
- **输入尺寸**：224x224 RGB图像
- **输出**：100维分类概率向量

### 性能指标
- **识别速度**：< 2秒/张（CPU）
- **模型大小**：~100MB
- **支持并发**：根据服务器配置而定

### 部署要求
- **Python**：3.7+
- **PyTorch**：1.8+
- **PIL/Pillow**：图像处理库
- **内存要求**：至少2GB可用内存
- **存储空间**：模型文件约100MB

## 版本信息

- **当前版本**：v1.0
- **更新日期**：2025年7月
- **维护状态**：积极维护

## 联系方式

如有技术问题或建议，请联系开发团队。
